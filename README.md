# Astrologic. Автоматическая оптимизация кода на уровне АСТ


Пакет Astrologic содержит ряд инструментов, позволяющих "в рантайме" оптимизировать работу ваших функций или даже конструировать новые функции. Все это достигается за счет парсинга и преобразования [ACT]() исходной функции. Парсинг происходит полностью "под капотом" и невидим для пользователя.


## Оглавление

- [**Быстрый старт**](#быстрый-старт)
- [**Включаем и отключаем блоки кода**](#включаем-и-отключаем-блоки-кода)


## Быстрый старт

Установите Astrologic через [pip](https://pypi.org/project/astrologic/):

```
$ pip install astrologic
```

## Включаем и отключаем блоки кода

Простейшим из декораторов библиотеки Astrologic является ```@switcher```. Вот пример его использования:

```python
from astrologic import switcher


@switcher(a=False, b=True)
def function():
  print('begin')
  if a:
    print('block a')
  if b:
    print('block b')
  print('end')

function() # Что будет выведено? Проверьте сами!
```

```@switcher``` проходится по унарным условиям (условиям, в которых только один операнд). Если название переменной, которая фигурирует в данном условии, присутствует в именованных аргументах самого декоратора, он делает одну из двух вещей. Если именованный аргумент равен True, он достает данный блок кода из условия заменяет им само условие. Если аргумент равен False, он удаляет условие вместе с блоком кода. То есть функция из примера выше превращается в:

```python
# Тот код, который будет исполнен на машине. Блок кода "if a:" полностью вырезан, а блок "if b:" вытащен из проверки, в то время как сама проверка тоже вырезана.
def function():
  print('begin')
  print('block b')
  print('end')
```

Использовать данный декоратор вы можете, к примеру, чтобы избежать каких-то проверок в вашем коде, основанных на константах. При инициализации функций в начале работы интерпретатора вы указываете, какие блоки кода вам нужны. По сути, if'ы в данном случае служат не по прямому назначению, а работают разметкой кода.

Поскольку ```@switcher``` редактирует функции на уровне АСТ, в некоторых случаях применение декоратора может ускорить ваш код, полностью убрав ненужные операции из реально исполняемого машиной кода.
